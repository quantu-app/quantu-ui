import{S as re,i as se,s as ze,M as K,w as Y,x as Z,y as x,N as Ie,O as $e,f as G,t as X,z as ee,P as ne,Q as ve,R as Be,m as p,h as c,n as D,b as z,B as Te,F as Me,k as g,q as T,a as V,l as y,r as M,c as O,K as d,U as oe,g as Le,V as Pe,d as Ve,D as Oe,e as Q,u as ae,a2 as je,L as Ce}from"../../../chunks/index-18cc2bc6.js";import{I as Ae}from"../../../chunks/IconBase-69dff996.js";import{g as We,E as Fe,w as Re,a as He}from"../../../chunks/user-013b6325.js";import{d as Ue,w as Ke}from"../../../chunks/index-2b5e2b12.js";function Ge(n){let e;return{c(){e=ve("path"),this.h()},l(t){e=Be(t,"path",{d:!0}),p(e).forEach(c),this.h()},h(){D(e,"d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z")},m(t,r){z(t,e,r)},p:Te,d(t){t&&c(e)}}}function Xe(n){let e,t;const r=[{viewBox:"0 0 24 24"},n[0]];let o={$$slots:{default:[Ge]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)o=K(o,r[s]);return e=new Ae({props:o}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){x(e,s,a),t=!0},p(s,[a]){const l=a&1?Ie(r,[r[0],$e(s[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:s}),e.$set(l)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function Qe(n,e,t){return n.$$set=r=>{t(0,e=K(K({},e),ne(r)))},e=ne(e),[e]}class Je extends re{constructor(e){super(),se(this,e,Qe,Xe,ze,{})}}function Ye(n){let e;return{c(){e=ve("path"),this.h()},l(t){e=Be(t,"path",{d:!0}),p(e).forEach(c),this.h()},h(){D(e,"d","M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z")},m(t,r){z(t,e,r)},p:Te,d(t){t&&c(e)}}}function Ze(n){let e,t;const r=[{viewBox:"0 0 24 24"},n[0]];let o={$$slots:{default:[Ye]},$$scope:{ctx:n}};for(let s=0;s<r.length;s+=1)o=K(o,r[s]);return e=new Ae({props:o}),{c(){Y(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){x(e,s,a),t=!0},p(s,[a]){const l=a&1?Ie(r,[r[0],$e(s[0])]):{};a&2&&(l.$$scope={dirty:a,ctx:s}),e.$set(l)},i(s){t||(G(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){ee(e,s)}}}function xe(n,e,t){return n.$$set=r=>{t(0,e=K(K({},e),ne(r)))},e=ne(e),[e]}class et extends re{constructor(e){super(),se(this,e,xe,Ze,ze,{})}}function me(n,e,t){const r=n.slice();return r[3]=e[t],r}function be(n){let e;function t(s,a){return s[1][1]===1?nt:tt}let r=t(n),o=r(n);return{c(){o.c(),e=Q()},l(s){o.l(s),e=Q()},m(s,a){o.m(s,a),z(s,e,a)},p(s,a){r!==(r=t(s))&&(o.d(1),o=r(s),o&&(o.c(),o.m(e.parentNode,e)))},d(s){o.d(s),s&&c(e)}}}function tt(n){let e;return{c(){e=T("^")},l(t){e=M(t,"^")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function nt(n){let e;return{c(){e=T("v")},l(t){e=M(t,"v")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function pe(n){let e;function t(s,a){return s[1][1]===1?st:rt}let r=t(n),o=r(n);return{c(){o.c(),e=Q()},l(s){o.l(s),e=Q()},m(s,a){o.m(s,a),z(s,e,a)},p(s,a){r!==(r=t(s))&&(o.d(1),o=r(s),o&&(o.c(),o.m(e.parentNode,e)))},d(s){o.d(s),s&&c(e)}}}function rt(n){let e;return{c(){e=T("^")},l(t){e=M(t,"^")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function st(n){let e;return{c(){e=T("v")},l(t){e=M(t,"v")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function Ee(n){let e;function t(s,a){return s[1][1]===1?at:ot}let r=t(n),o=r(n);return{c(){o.c(),e=Q()},l(s){o.l(s),e=Q()},m(s,a){o.m(s,a),z(s,e,a)},p(s,a){r!==(r=t(s))&&(o.d(1),o=r(s),o&&(o.c(),o.m(e.parentNode,e)))},d(s){o.d(s),s&&c(e)}}}function ot(n){let e;return{c(){e=T("^")},l(t){e=M(t,"^")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function at(n){let e;return{c(){e=T("v")},l(t){e=M(t,"v")},m(t,r){z(t,e,r)},d(t){t&&c(e)}}}function ge(n,e){let t,r,o=e[3].id+"",s,a,l,f=e[3].name+"",E,I,q,N=e[3].created_at+"",S,W,w,m,L,v,F,P,h,_,b,$;return v=new Je({}),_=new et({}),{key:n,first:null,c(){t=g("tr"),r=g("td"),s=T(o),a=V(),l=g("td"),E=T(f),I=V(),q=g("td"),S=T(N),W=V(),w=g("td"),m=g("button"),L=g("div"),Y(v.$$.fragment),F=V(),P=g("button"),h=g("div"),Y(_.$$.fragment),b=V(),this.h()},l(k){t=y(k,"TR",{});var i=p(t);r=y(i,"TD",{class:!0});var u=p(r);s=M(u,o),u.forEach(c),a=O(i),l=y(i,"TD",{class:!0});var B=p(l);E=M(B,f),B.forEach(c),I=O(i),q=y(i,"TD",{class:!0});var A=p(q);S=M(A,N),A.forEach(c),W=O(i),w=y(i,"TD",{class:!0});var j=p(w);m=y(j,"BUTTON",{class:!0});var R=p(m);L=y(R,"DIV",{class:!0});var H=p(L);Z(v.$$.fragment,H),H.forEach(c),R.forEach(c),F=O(j),P=y(j,"BUTTON",{class:!0});var J=p(P);h=y(J,"DIV",{class:!0});var U=p(h);Z(_.$$.fragment,U),U.forEach(c),J.forEach(c),j.forEach(c),b=O(i),i.forEach(c),this.h()},h(){D(r,"class","border-b border-slate-100 dark:border-slate-700 p-1"),D(l,"class","border-b border-slate-100 dark:border-slate-700 p-1"),D(q,"class","border-b border-slate-100 dark:border-slate-700 p-1"),D(L,"class","inline-block w-6 h-6"),D(m,"class","btn icon primary"),D(h,"class","inline-block w-6 h-6"),D(P,"class","btn icon danger"),D(w,"class","border-b border-slate-100 dark:border-slate-700 p-1"),this.first=t},m(k,i){z(k,t,i),d(t,r),d(r,s),d(t,a),d(t,l),d(l,E),d(t,I),d(t,q),d(q,S),d(t,W),d(t,w),d(w,m),d(m,L),x(v,L,null),d(w,F),d(w,P),d(P,h),x(_,h,null),d(t,b),$=!0},p(k,i){e=k,(!$||i&1)&&o!==(o=e[3].id+"")&&ae(s,o),(!$||i&1)&&f!==(f=e[3].name+"")&&ae(E,f),(!$||i&1)&&N!==(N=e[3].created_at+"")&&ae(S,N)},i(k){$||(G(v.$$.fragment,k),G(_.$$.fragment,k),$=!0)},o(k){X(v.$$.fragment,k),X(_.$$.fragment,k),$=!1},d(k){k&&c(t),ee(v),ee(_)}}}function it(n){let e,t,r,o,s,a,l,f,E,I,q,N,S,W,w,m=[],L=new Map,v,F,P,h=n[1]&&n[1][0]==="id"&&be(n),_=n[1]&&n[1][0]==="name"&&pe(n),b=n[1]&&n[1][0]==="created_at"&&Ee(n),$=n[0];const k=i=>i[3].id;for(let i=0;i<$.length;i+=1){let u=me(n,$,i),B=k(u);L.set(B,m[i]=ge(B,u))}return{c(){e=g("table"),t=g("thead"),r=g("tr"),o=g("th"),s=T("Id "),h&&h.c(),a=V(),l=g("th"),f=T("Name "),_&&_.c(),E=V(),I=g("th"),q=T("Created At "),b&&b.c(),N=V(),S=g("th"),W=V(),w=g("tbody");for(let i=0;i<m.length;i+=1)m[i].c();this.h()},l(i){e=y(i,"TABLE",{class:!0});var u=p(e);t=y(u,"THEAD",{});var B=p(t);r=y(B,"TR",{});var A=p(r);o=y(A,"TH",{class:!0});var j=p(o);s=M(j,"Id "),h&&h.l(j),j.forEach(c),a=O(A),l=y(A,"TH",{class:!0});var R=p(l);f=M(R,"Name "),_&&_.l(R),R.forEach(c),E=O(A),I=y(A,"TH",{class:!0});var H=p(I);q=M(H,"Created At "),b&&b.l(H),H.forEach(c),N=O(A),S=y(A,"TH",{class:!0}),p(S).forEach(c),A.forEach(c),B.forEach(c),W=O(u),w=y(u,"TBODY",{});var J=p(w);for(let U=0;U<m.length;U+=1)m[U].l(J);J.forEach(c),u.forEach(c),this.h()},h(){D(o,"class","border-b dark:border-slate-600 cursor-pointer select-none text-left p-1"),D(l,"class","border-b dark:border-slate-600 cursor-pointer select-none text-left p-1"),D(I,"class","border-b dark:border-slate-600 cursor-pointer select-none text-left p-1"),D(S,"class","border-b dark:border-slate-600 cursor-pointer select-none text-left p-1"),D(e,"class","table-auto w-full")},m(i,u){z(i,e,u),d(e,t),d(t,r),d(r,o),d(o,s),h&&h.m(o,null),d(r,a),d(r,l),d(l,f),_&&_.m(l,null),d(r,E),d(r,I),d(I,q),b&&b.m(I,null),d(r,N),d(r,S),d(e,W),d(e,w);for(let B=0;B<m.length;B+=1)m[B].m(w,null);v=!0,F||(P=[oe(o,"click",n[2]("id")),oe(l,"click",n[2]("name")),oe(I,"click",n[2]("created_at"))],F=!0)},p(i,[u]){i[1]&&i[1][0]==="id"?h?h.p(i,u):(h=be(i),h.c(),h.m(o,null)):h&&(h.d(1),h=null),i[1]&&i[1][0]==="name"?_?_.p(i,u):(_=pe(i),_.c(),_.m(l,null)):_&&(_.d(1),_=null),i[1]&&i[1][0]==="created_at"?b?b.p(i,u):(b=Ee(i),b.c(),b.m(I,null)):b&&(b.d(1),b=null),u&1&&($=i[0],Le(),m=Pe(m,u,k,1,i,$,L,w,je,ge,null,me),Ve())},i(i){if(!v){for(let u=0;u<$.length;u+=1)G(m[u]);v=!0}},o(i){for(let u=0;u<m.length;u+=1)X(m[u]);v=!1},d(i){i&&c(e),h&&h.d(),_&&_.d(),b&&b.d();for(let u=0;u<m.length;u+=1)m[u].d();F=!1,Oe(P)}}}function ct(n,e,t){let{quizzes:r}=e,o;function s(a){function l(f,E){return o&&o[1]===-1?f[a]<E[a]?-1:1:f[a]>E[a]?-1:1}return()=>{o&&o[0]===a?t(1,o=[a,-o[1]]):t(1,o=[a,1]),t(0,r=[...r].sort(l))}}return n.$$set=a=>{"quizzes"in a&&t(0,r=a.quizzes)},[r,o,s]}class lt extends re{constructor(e){super(),se(this,e,ct,it,Me,{quizzes:0})}}function ut(n){return{...n,created_at:new Date(n.created_at),updated_at:new Date(n.updated_at)}}async function dt(){const n=await fetch(`${{}.VITE_QUANTU_API_URL}/api/quizzes`,{headers:{...We(),"Content-Type":"application/json"}});if(n.ok)return(await n.json()).map(ut);throw n}const ft=(n,e)=>e.some(t=>n instanceof t);let ye,ke;function _t(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ht(){return ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qe=new WeakMap,de=new WeakMap,Se=new WeakMap,ie=new WeakMap,_e=new WeakMap;function mt(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(C(n.result)),o()},a=()=>{r(n.error),o()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&qe.set(t,n)}).catch(()=>{}),_e.set(e,n),e}function bt(n){if(de.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),o()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});de.set(n,e)}let fe={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return de.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Se.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return C(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pt(n){fe=n(fe)}function Et(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ce(this),e,...t);return Se.set(r,e.sort?e.sort():[e]),C(r)}:ht().includes(n)?function(...e){return n.apply(ce(this),e),C(qe.get(this))}:function(...e){return C(n.apply(ce(this),e))}}function gt(n){return typeof n=="function"?Et(n):(n instanceof IDBTransaction&&bt(n),ft(n,_t())?new Proxy(n,fe):n)}function C(n){if(n instanceof IDBRequest)return mt(n);if(ie.has(n))return ie.get(n);const e=gt(n);return e!==n&&(ie.set(n,e),_e.set(e,n)),e}const ce=n=>_e.get(n);function yt(n,e,{blocked:t,upgrade:r,blocking:o,terminated:s}={}){const a=indexedDB.open(n,e),l=C(a);return r&&a.addEventListener("upgradeneeded",f=>{r(C(a.result),f.oldVersion,f.newVersion,C(a.transaction),f)}),t&&a.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),l.then(f=>{s&&f.addEventListener("close",()=>s()),o&&f.addEventListener("versionchange",E=>o(E.oldVersion,E.newVersion,E))}).catch(()=>{}),l}const kt=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],le=new Map;function De(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(le.get(e))return le.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Dt.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||kt.includes(t)))return;const s=async function(a,...l){const f=this.transaction(a,o?"readwrite":"readonly");let E=f.store;return r&&(E=E.index(l.shift())),(await Promise.all([E[t](...l),o&&f.done]))[0]};return le.set(e,s),s}pt(n=>({...n,get:(e,t,r)=>De(e,t)||n.get(e,t,r),has:(e,t)=>!!De(e,t)||n.has(e,t)}));const wt="quantu",zt=1,It={upgrade(n){const e=n.createObjectStore("quizzes",{keyPath:"local_id",autoIncrement:!0});e.createIndex("id","id"),e.createIndex("local_id","local_id"),e.createIndex("local_deleted","local_deleted")}};function Ne(){return $t(wt,zt,It)}let te,ue=!1;const we=new Fe;function $t(n,e,t={}){return te?Promise.resolve(te):ue?new Promise(r=>we.once("db",r)):(ue=!0,yt(n,e,t).then(r=>(r.addEventListener("close",()=>{te=void 0}),te=r,we.emit("db",r),r)).finally(()=>{ue=!1}))}async function vt(){return await(await Ne()).getAllFromIndex("quizzes","local_deleted",0)}async function Bt(n){const e=await Ne(),t=await e.getFromIndex("quizzes","id",n.id);let r;t?t.updated_at>n.updated_at?r={...n,...t}:r={...t,...n}:r={...n,local_deleted:0};const o=await e.put("quizzes",r);return{...r,local_id:o}}const he=Ke({}),Tt=Ue(he,n=>Object.values(n));Re().then(async n=>{At(),He()&&await Mt()});async function Mt(){const n=await dt(),e=await Promise.all(n.map(Bt));he.update(t=>e.reduce((r,o)=>(r[o.local_id]=o,r),t))}async function At(){const n=await vt();he.update(e=>n.reduce((t,r)=>(t[r.local_id]=r,t),e))}function qt(n){let e,t,r;return t=new lt({props:{quizzes:n[0]}}),{c(){e=g("div"),Y(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var s=p(e);Z(t.$$.fragment,s),s.forEach(c),this.h()},h(){D(e,"class","container mx-auto")},m(o,s){z(o,e,s),x(t,e,null),r=!0},p(o,[s]){const a={};s&1&&(a.quizzes=o[0]),t.$set(a)},i(o){r||(G(t.$$.fragment,o),r=!0)},o(o){X(t.$$.fragment,o),r=!1},d(o){o&&c(e),ee(t)}}}function St(n,e,t){let r;return Ce(n,Tt,o=>t(0,r=o)),[r]}class Ot extends re{constructor(e){super(),se(this,e,St,qt,Me,{})}}export{Ot as default};
