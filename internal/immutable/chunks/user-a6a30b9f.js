var X=Object.defineProperty;var Y=(i,e,t)=>e in i?X(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var I=(i,e,t)=>(Y(i,typeof e!="symbol"?e+"":e,t),t);import{w as J,d as M}from"./index-779a6bb2.js";import{a1 as v}from"./index-169c4bf0.js";const O={};function Z(i){return i}function j(i){return i}function $(i,e,t={}){const n=typeof window<"u"&&typeof window.localStorage<"u",r=t.toJSON||j,o=t.fromJSON||Z;function c(h,p){return n&&window.localStorage.setItem(h,JSON.stringify(r(p))),p}if(!O[i]){let u=function(s){c(i,s),a(s)};const h=J(e,s=>{const g=n?window.localStorage.getItem(i):null;if(g&&s(o(JSON.parse(g))),n){let z=function(l){l.key===i&&s(l.newValue?o(JSON.parse(l.newValue)):null)};return window.addEventListener("storage",z),()=>{window.removeEventListener("storage",z)}}}),{subscribe:p,set:a}=h;O[i]={set:u,update(s){u(s(v(h)))},subscribe:p}}return O[i]}var E={},ee={get exports(){return E},set exports(i){E=i}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(p,a,u){this.fn=p,this.context=a,this.once=u||!1}function o(p,a,u,s,g){if(typeof u!="function")throw new TypeError("The listener must be a function");var z=new r(u,s||p,g),l=t?t+a:a;return p._events[l]?p._events[l].fn?p._events[l]=[p._events[l],z]:p._events[l].push(z):(p._events[l]=z,p._eventsCount++),p}function c(p,a){--p._eventsCount===0?p._events=new n:delete p._events[a]}function h(){this._events=new n,this._eventsCount=0}h.prototype.eventNames=function(){var a=[],u,s;if(this._eventsCount===0)return a;for(s in u=this._events)e.call(u,s)&&a.push(t?s.slice(1):s);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(u)):a},h.prototype.listeners=function(a){var u=t?t+a:a,s=this._events[u];if(!s)return[];if(s.fn)return[s.fn];for(var g=0,z=s.length,l=new Array(z);g<z;g++)l[g]=s[g].fn;return l},h.prototype.listenerCount=function(a){var u=t?t+a:a,s=this._events[u];return s?s.fn?1:s.length:0},h.prototype.emit=function(a,u,s,g,z,l){var y=t?t+a:a;if(!this._events[y])return!1;var d=this._events[y],m=arguments.length,A,f;if(d.fn){switch(d.once&&this.removeListener(a,d.fn,void 0,!0),m){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,u),!0;case 3:return d.fn.call(d.context,u,s),!0;case 4:return d.fn.call(d.context,u,s,g),!0;case 5:return d.fn.call(d.context,u,s,g,z),!0;case 6:return d.fn.call(d.context,u,s,g,z,l),!0}for(f=1,A=new Array(m-1);f<m;f++)A[f-1]=arguments[f];d.fn.apply(d.context,A)}else{var H=d.length,_;for(f=0;f<H;f++)switch(d[f].once&&this.removeListener(a,d[f].fn,void 0,!0),m){case 1:d[f].fn.call(d[f].context);break;case 2:d[f].fn.call(d[f].context,u);break;case 3:d[f].fn.call(d[f].context,u,s);break;case 4:d[f].fn.call(d[f].context,u,s,g);break;default:if(!A)for(_=1,A=new Array(m-1);_<m;_++)A[_-1]=arguments[_];d[f].fn.apply(d[f].context,A)}}return!0},h.prototype.on=function(a,u,s){return o(this,a,u,s,!1)},h.prototype.once=function(a,u,s){return o(this,a,u,s,!0)},h.prototype.removeListener=function(a,u,s,g){var z=t?t+a:a;if(!this._events[z])return this;if(!u)return c(this,z),this;var l=this._events[z];if(l.fn)l.fn===u&&(!g||l.once)&&(!s||l.context===s)&&c(this,z);else{for(var y=0,d=[],m=l.length;y<m;y++)(l[y].fn!==u||g&&!l[y].once||s&&l[y].context!==s)&&d.push(l[y]);d.length?this._events[z]=d.length===1?d[0]:d:c(this,z)}return this},h.prototype.removeAllListeners=function(a){var u;return a?(u=t?t+a:a,this._events[u]&&c(this,u)):(this._events=new n,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=t,h.EventEmitter=h,i.exports=h})(ee);const D=E,x=new D,K=J(typeof navigator=="object"?navigator.onLine:!1),ie=M(K,i=>i);function te(){return v(ie)}function ne(){K.set(!0),x.emit("online")}function re(){K.set(!1),x.emit("offline")}typeof window=="object"&&(window.addEventListener("online",ne),window.addEventListener("offline",re));const oe="http://localhost:3000".replace(/\/+$/,"");class S{constructor(e={}){this.configuration=e}set config(e){this.configuration=e}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:oe}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||k}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){const e=this.configuration.apiKey;if(e)return typeof e=="function"?e:()=>e}get accessToken(){const e=this.configuration.accessToken;if(e)return typeof e=="function"?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}}const se=new S;class F{constructor(e=se){I(this,"middleware");I(this,"fetchApi",async(e,t)=>{let n={url:e,init:t};for(const o of this.middleware)o.pre&&(n=await o.pre({fetch:this.fetchApi,...n})||n);let r;try{r=await(this.configuration.fetchApi||fetch)(n.url,n.init)}catch(o){for(const c of this.middleware)c.onError&&(r=await c.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:o,response:r?r.clone():void 0})||r);if(r===void 0)throw o instanceof Error?new ce(o,"The request failed and the interceptors did not return an alternative response"):o}for(const o of this.middleware)o.post&&(r=await o.post({fetch:this.fetchApi,url:n.url,init:n.init,response:r.clone()})||r);return r});this.configuration=e,this.middleware=e.middleware}withMiddleware(...e){const t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){const t=e.map(n=>({pre:n}));return this.withMiddleware(...t)}withPostMiddleware(...e){const t=e.map(n=>({post:n}));return this.withMiddleware(...t)}async request(e,t){const{url:n,init:r}=await this.createFetchParams(e,t),o=await this.fetchApi(n,r);if(o&&o.status>=200&&o.status<300)return o;throw new de(o,"Response returned an error code")}async createFetchParams(e,t){let n=this.configuration.basePath+e.path;e.query!==void 0&&Object.keys(e.query).length!==0&&(n+="?"+this.configuration.queryParamsStringify(e.query));const r=Object.assign({},this.configuration.headers,e.headers);Object.keys(r).forEach(a=>r[a]===void 0?delete r[a]:{});const o=typeof t=="function"?t:async()=>t,c={method:e.method,headers:r,body:e.body,credentials:this.configuration.credentials},h={...c,...await o({init:c,context:e})},p={...h,body:ue(h.body)||h.body instanceof URLSearchParams||ae(h.body)?h.body:JSON.stringify(h.body)};return{url:n,init:p}}clone(){const e=this.constructor,t=new e(this.configuration);return t.middleware=this.middleware.slice(),t}}function ae(i){return typeof Blob<"u"&&i instanceof Blob}function ue(i){return typeof FormData<"u"&&i instanceof FormData}class de extends Error{constructor(t,n){super(n);I(this,"name","ResponseError");this.response=t}}class ce extends Error{constructor(t,n){super(n);I(this,"name","FetchError");this.cause=t}}class w extends Error{constructor(t,n){super(n);I(this,"name","RequiredError");this.field=t}}function U(i,e){const t=i[e];return t!=null}function k(i,e=""){return Object.keys(i).map(t=>B(t,i[t],e)).filter(t=>t.length>0).join("&")}function B(i,e,t=""){const n=t+(t.length?`[${i}]`:i);if(e instanceof Array){const r=e.map(o=>encodeURIComponent(String(o))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${r}`}if(e instanceof Set){const r=Array.from(e);return B(i,r,t)}return e instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(e.toISOString())}`:e instanceof Object?k(e,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(e))}`}class Q{constructor(e,t=n=>n){this.raw=e,this.transformer=t}async value(){return this.transformer(await this.raw.json())}}class L{constructor(e){this.raw=e}async value(){}}function q(i){return pe(i)}function pe(i,e){return i==null?i:{id:i.id,user_id:i.user_id,name:U(i,"name")?i.name:void 0,uri:U(i,"uri")?i.uri:void 0,learnable_resource_type:i.learnable_resource_type,learnable_resource:i.learnable_resource,question_type:i.question_type,item_order:i.item_order,data:i.data,created_at:new Date(i.created_at),updated_at:new Date(i.updated_at)}}function he(i){return le(i)}function le(i,e){return i==null?i:{moved_question:q(i.moved_question),other_questions:i.other_questions.map(q)}}function fe(i){if(i!==void 0)return i===null?null:{name:i.name}}function ze(i){if(i!==void 0)return i===null?null:{name:i.name,item_order_position:i.item_order_position,data:i.data,question_type:i.question_type}}function we(i){if(i!==void 0)return i===null?null:{item_order_position:i.item_order_position}}function ge(i){if(i!==void 0)return i===null?null:{email:i.email,password:i.password}}function Qe(i){if(i!==void 0)return i===null?null:{name:i.name}}function ye(i){if(i!==void 0)return i===null?null:{name:i.name,item_order_position:i.item_order_position,data:i.data,question_type:i.question_type}}function R(i){return me(i)}function me(i,e){return i==null?i:{id:i.id,user_id:i.user_id,learnable_resource_type:i.learnable_resource_type,name:i.name,uri:i.uri,created_at:new Date(i.created_at),updated_at:new Date(i.updated_at)}}function Ae(i){return Ie(i)}function Ie(i,e){return i==null?i:{token:i.token,expires_at:new Date(i.expires_at)}}function qe(i){return ve(i)}function ve(i,e){return i==null?i:{id:i.id,email:i.email,username:i.username,created_at:new Date(i.created_at),updated_at:new Date(i.updated_at)}}class _e extends F{async getApiAuthMeRaw(e){const t={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const r=await this.request({path:"/api/auth/me",method:"GET",headers:n,query:t},e);return new Q(r,o=>qe(o))}async getApiAuthMe(e){return await(await this.getApiAuthMeRaw(e)).value()}async postApiAuthLoginRaw(e,t){if(e.postApiAuthLogin===null||e.postApiAuthLogin===void 0)throw new w("postApiAuthLogin","Required parameter requestParameters.postApiAuthLogin was null or undefined when calling postApiAuthLogin.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/auth/login",method:"POST",headers:r,query:n,body:ge(e.postApiAuthLogin)},t);return new Q(o,c=>Ae(c))}async postApiAuthLogin(e,t){return await(await this.postApiAuthLoginRaw(e,t)).value()}}class Re extends F{async deleteApiQuizzesIdRaw(e,t){if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling deleteApiQuizzesId.");const n={},r={};this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{id}".replace("{id}",encodeURIComponent(String(e.id))),method:"DELETE",headers:r,query:n},t);return new L(o)}async deleteApiQuizzesId(e,t){await this.deleteApiQuizzesIdRaw(e,t)}async deleteApiQuizzesQuizIdQuestionsIdRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling deleteApiQuizzesQuizIdQuestionsId.");if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling deleteApiQuizzesQuizIdQuestionsId.");const n={},r={};this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions/{id}".replace("{quiz_id}",encodeURIComponent(String(e.quizId))).replace("{id}",encodeURIComponent(String(e.id))),method:"DELETE",headers:r,query:n},t);return new L(o)}async deleteApiQuizzesQuizIdQuestionsId(e,t){await this.deleteApiQuizzesQuizIdQuestionsIdRaw(e,t)}async getApiQuizzesRaw(e){const t={},n={};this.configuration&&this.configuration.apiKey&&(n.Authorization=this.configuration.apiKey("Authorization"));const r=await this.request({path:"/api/quizzes",method:"GET",headers:n,query:t},e);return new Q(r,o=>o.map(R))}async getApiQuizzes(e){return await(await this.getApiQuizzesRaw(e)).value()}async getApiQuizzesIdRaw(e,t){if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling getApiQuizzesId.");const n={},r={};this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{id}".replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:r,query:n},t);return new Q(o,c=>R(c))}async getApiQuizzesId(e,t){return await(await this.getApiQuizzesIdRaw(e,t)).value()}async getApiQuizzesQuizIdQuestionsRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling getApiQuizzesQuizIdQuestions.");const n={},r={};this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions".replace("{quiz_id}",encodeURIComponent(String(e.quizId))),method:"GET",headers:r,query:n},t);return new Q(o,c=>c.map(q))}async getApiQuizzesQuizIdQuestions(e,t){return await(await this.getApiQuizzesQuizIdQuestionsRaw(e,t)).value()}async getApiQuizzesQuizIdQuestionsIdRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling getApiQuizzesQuizIdQuestionsId.");if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling getApiQuizzesQuizIdQuestionsId.");const n={},r={};this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions/{id}".replace("{quiz_id}",encodeURIComponent(String(e.quizId))).replace("{id}",encodeURIComponent(String(e.id))),method:"GET",headers:r,query:n},t);return new Q(o,c=>q(c))}async getApiQuizzesQuizIdQuestionsId(e,t){return await(await this.getApiQuizzesQuizIdQuestionsIdRaw(e,t)).value()}async patchApiQuizzesIdRaw(e,t){if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling patchApiQuizzesId.");if(e.patchApiQuizzesId===null||e.patchApiQuizzesId===void 0)throw new w("patchApiQuizzesId","Required parameter requestParameters.patchApiQuizzesId was null or undefined when calling patchApiQuizzesId.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{id}".replace("{id}",encodeURIComponent(String(e.id))),method:"PATCH",headers:r,query:n,body:fe(e.patchApiQuizzesId)},t);return new Q(o,c=>R(c))}async patchApiQuizzesId(e,t){return await(await this.patchApiQuizzesIdRaw(e,t)).value()}async patchApiQuizzesQuizIdQuestionsIdRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling patchApiQuizzesQuizIdQuestionsId.");if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling patchApiQuizzesQuizIdQuestionsId.");if(e.patchApiQuizzesQuizIdQuestionsId===null||e.patchApiQuizzesQuizIdQuestionsId===void 0)throw new w("patchApiQuizzesQuizIdQuestionsId","Required parameter requestParameters.patchApiQuizzesQuizIdQuestionsId was null or undefined when calling patchApiQuizzesQuizIdQuestionsId.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions/{id}".replace("{quiz_id}",encodeURIComponent(String(e.quizId))).replace("{id}",encodeURIComponent(String(e.id))),method:"PATCH",headers:r,query:n,body:ze(e.patchApiQuizzesQuizIdQuestionsId)},t);return new Q(o,c=>q(c))}async patchApiQuizzesQuizIdQuestionsId(e,t){return await(await this.patchApiQuizzesQuizIdQuestionsIdRaw(e,t)).value()}async patchApiQuizzesQuizIdQuestionsIdMoveRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling patchApiQuizzesQuizIdQuestionsIdMove.");if(e.id===null||e.id===void 0)throw new w("id","Required parameter requestParameters.id was null or undefined when calling patchApiQuizzesQuizIdQuestionsIdMove.");if(e.patchApiQuizzesQuizIdQuestionsIdMove===null||e.patchApiQuizzesQuizIdQuestionsIdMove===void 0)throw new w("patchApiQuizzesQuizIdQuestionsIdMove","Required parameter requestParameters.patchApiQuizzesQuizIdQuestionsIdMove was null or undefined when calling patchApiQuizzesQuizIdQuestionsIdMove.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions/{id}/move".replace("{quiz_id}",encodeURIComponent(String(e.quizId))).replace("{id}",encodeURIComponent(String(e.id))),method:"PATCH",headers:r,query:n,body:we(e.patchApiQuizzesQuizIdQuestionsIdMove)},t);return new Q(o,c=>he(c))}async patchApiQuizzesQuizIdQuestionsIdMove(e,t){return await(await this.patchApiQuizzesQuizIdQuestionsIdMoveRaw(e,t)).value()}async postApiQuizzesRaw(e,t){if(e.postApiQuizzes===null||e.postApiQuizzes===void 0)throw new w("postApiQuizzes","Required parameter requestParameters.postApiQuizzes was null or undefined when calling postApiQuizzes.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes",method:"POST",headers:r,query:n,body:Qe(e.postApiQuizzes)},t);return new Q(o,c=>R(c))}async postApiQuizzes(e,t){return await(await this.postApiQuizzesRaw(e,t)).value()}async postApiQuizzesQuizIdQuestionsRaw(e,t){if(e.quizId===null||e.quizId===void 0)throw new w("quizId","Required parameter requestParameters.quizId was null or undefined when calling postApiQuizzesQuizIdQuestions.");if(e.postApiQuizzesQuizIdQuestions===null||e.postApiQuizzesQuizIdQuestions===void 0)throw new w("postApiQuizzesQuizIdQuestions","Required parameter requestParameters.postApiQuizzesQuizIdQuestions was null or undefined when calling postApiQuizzesQuizIdQuestions.");const n={},r={};r["Content-Type"]="application/json",this.configuration&&this.configuration.apiKey&&(r.Authorization=this.configuration.apiKey("Authorization"));const o=await this.request({path:"/api/quizzes/{quiz_id}/questions".replace("{quiz_id}",encodeURIComponent(String(e.quizId))),method:"POST",headers:r,query:n,body:ye(e.postApiQuizzesQuizIdQuestions)},t);return new Q(o,c=>q(c))}async postApiQuizzesQuizIdQuestions(e,t){return await(await this.postApiQuizzesQuizIdQuestionsRaw(e,t)).value()}}const N={basePath:{}.VITE_QUANTU_API_URL},b=new S(N),Te=new Re(b),T=new _e(b),G=$("jwt",null),V=$("user",null,{fromJSON(i){return{...i,updated_at:new Date(i.updated_at),created_at:new Date(i.created_at)}}}),P=M(V,i=>i);function Ce(){return v(P)}function Se(i){G.set(i),b.config=new S({...N,apiKey:i.token})}async function Ke(i,e){const t=await T.postApiAuthLogin({postApiAuthLogin:{email:i,password:e}});Se(t);const n=await T.getApiAuthMe();return V.set(n),n}async function Ne(){if(C){const i=v(P);if(i)return i}return new Promise(i=>W.once("user",i))}const W=new D;let C=!1;async function Pe(){let i=v(P);if(te()&&!C){const e=v(G);C=!0,e&&(b.config=new S({...N,apiKey:e.token}),i=await T.getApiAuthMe())}return i&&W.emit("user",i),i}export{D as E,te as a,Ce as g,Pe as i,x as o,Te as q,Ke as s,Ne as w};
