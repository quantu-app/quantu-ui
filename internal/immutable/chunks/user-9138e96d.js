import{g as u,s as c,j as l}from"./jwt-bfe505ef.js";import{d as f,w as p}from"./index-d31a7341.js";import{a1 as s}from"./index-703b9339.js";function w(t){return{...t,created_at:new Date(t.created_at),updated_at:new Date(t.updated_at)}}function d(t){return{...t,exp:new Date(t.exp)}}async function m(t,n){const e=await fetch(`${{}.VITE_QUANTU_API_URL}/api/auth/login`,{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}});if(e.ok){const o=d(await e.json());return c(o),i()}else throw e}async function i(){const t=await fetch(`${{}.VITE_QUANTU_API_URL}/api/auth/me`,{headers:{...u(),"Content-Type":"application/json"}});if(t.ok)return w(await t.json());throw t}const a=p(null),_=f(a,t=>t);async function g(t,n){const e=await m(t,n);return a.set(e),e}async function T(){var n;if((n=s(l))==null?void 0:n.token){const e=await i();return a.set(e),e}else return null}let r=!1;async function k(){return r?s(_):(r=!0,T())}export{k as i,g as s};
